<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xô Phim - PHIM HAY CẢ XÔ </title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --xo-vang: #d4a017; --bg-dark: #0b0c10; }
        body { background-color: var(--bg-dark); color: #e2e8f0; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        #header { 
            position: fixed; top: 0; left: 0; width: 100%; z-index: 120;
            background: linear-gradient(to bottom, rgba(160, 0, 0, 0.98) 0%, rgba(130, 0, 0, 0.85) 60%, transparent 100%);
            padding: 15px 20px 30px 20px;
        }

        .search-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px; padding: 8px 15px;
            display: flex; align-items: center; gap: 10px; width: 100%; max-width: 400px;
        }
        .search-bar input { background: transparent; border: none; outline: none; color: white; font-size: 14px; width: 100%; }

        .nav-scroll {
            display: flex; overflow-x: auto; white-space: nowrap;
            gap: 20px; padding: 15px 0 0 0; scrollbar-width: none;
        }
        .nav-scroll::-webkit-scrollbar { display: none; }
        .nav-item { color: rgba(255,255,255,0.9); font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 4px; transition: 0.3s; }
        .nav-item:hover { color: var(--xo-vang); }
        .badge-new { background: #f59e0b; color: #000; font-size: 9px; padding: 1px 4px; border-radius: 3px; font-weight: 900; }

        #tet-alert {
            position: fixed; inset: 0; z-index: 300; display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.92); backdrop-filter: blur(8px);
        }
        .alert-box {
            background: #8B0000; padding: 2.5rem; border: 4px solid var(--xo-vang); text-align: center; 
            max-width: 85%; border-radius: 30px; box-shadow: 0 0 60px rgba(212,160,23,0.4);
            animation: zoomIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); transition: 0.5s;
        }
        @keyframes zoomIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .closing { transform: scale(0) !important; opacity: 0 !important; }

        .cat-btn {
            width: 110px; height: 110px; margin: 0 auto; border-radius: 50%; border: 4px solid var(--xo-vang);
            overflow: hidden; cursor: pointer; box-shadow: 0 0 20px var(--xo-vang); transition: 0.3s;
        }
        .cat-btn:hover { transform: scale(1.1); }

        .topic-card { min-width: 160px; height: 90px; border-radius: 16px; display: flex; flex-direction: column; justify-content: space-between; transition: 0.3s; cursor: pointer; padding: 15px; }
        .topic-card:hover { transform: translateY(-5px); filter: brightness(1.2); }

        .footer { background: #060709; padding: 60px 20px; border-top: 1px solid rgba(255,255,255,0.05); position: relative; }
        .footer-tag { background: #900; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; display: inline-block; margin-bottom: 20px; }
        .social-icons { display: flex; gap: 12px; margin: 20px 0; }
        .social-icons a { width: 35px; height: 35px; border-radius: 50%; background: rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .social-icons a:hover { background: var(--xo-vang); color: black; }
        
        .btn-top { position: absolute; bottom: 30px; right: 20px; background: white; color: black; padding: 8px 12px; border-radius: 10px; font-weight: 900; font-size: 10px; text-align: center; cursor: pointer; }

        /* Hoa đào */
        .sakura { position: fixed; top: -10%; z-index: 100; pointer-events: none; background: #ffb7c5; border-radius: 50% 0 50% 50%; animation: fall linear infinite; }
        @keyframes fall { 100% { transform: translateY(110vh) rotate(720deg); opacity: 0; } }

        /* Canvas Pháo Hoa */
        #fw-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 90; }
    </style>
</head>
<body>

    <canvas id="fw-canvas"></canvas>

    <div id="tet-alert">
        <div class="alert-box" id="alertBox">
            <h2 class="text-2xl font-black mb-3 text-yellow-400 italic uppercase">CẢNH BÁO !</h2>
            <p class="text-md font-bold text-white mb-6 leading-tight">CÓ CHỨA QC CỜ BẠC TRÁNH XA NHÉ!<br>
            <span class="text-xs font-normal text-gray-200">Chúc các bạn yêu nhiều sức khỏe, kiếm nhiều tiền nha!</span></p>
            <div class="cat-btn" onclick="closeAlertWithEffect()">
                <img src="https://jbagy.me/wp-content/uploads/2025/04/Hinh-meme-meo-cuoi-deu-1.jpg" class="w-full h-full object-cover">
            </div>
            <p class="text-[10px] text-yellow-500 font-bold mt-4 uppercase tracking-widest">Chạm Mèo để vào phim</p>
        </div>
    </div>

    <header id="header">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div class="flex items-center justify-between w-full md:w-auto">
                <div class="flex items-center gap-2 cursor-pointer">
                    <div class="w-9 h-8 bg-[#d4a017] rounded-b-xl flex items-center justify-center">
                        <i class="fas fa-play text-black text-xs"></i>
                    </div>
                    <div class="flex flex-col leading-none">
                        <span class="text-xl font-black text-white tracking-tighter uppercase">XÔ PHIM</span>
                        <span class="text-[8px] text-gray-400 font-bold tracking-widest uppercase">Đức Anh Đẹp Trai</span>
                    </div>
                </div>
            </div>
            <div class="search-bar">
                <i class="fas fa-search text-gray-400 text-sm"></i>
                <input type="text" placeholder="Tìm phim, diễn viên...">
            </div>
        </div>
        <nav class="nav-scroll">
            <a href="#" class="nav-item">Chủ Đề</a>
            <a href="#" class="nav-item">Thể loại <i class="fas fa-caret-down text-[10px]"></i></a>
            <a href="#" class="nav-item">Phim Lẻ</a>
            <a href="#" class="nav-item">Phim Bộ</a>
            <a href="#" class="nav-item"><span class="badge-new">NEW</span> Xem Chung</a>
            <a href="#" class="nav-item">Quốc gia</a>
        </nav>
    </header>

    <section class="relative h-[85vh] w-full pt-32 overflow-hidden">
        <div id="banner-bg" class="absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-105 opacity-60"></div>
        <div class="absolute inset-0" style="background: linear-gradient(to top, var(--bg-dark) 5%, transparent 100%), linear-gradient(to right, rgba(0,0,0,0.8) 0%, transparent 60%);"></div>
        
        <div class="relative z-10 flex flex-col items-start justify-end h-full px-10 pb-20 max-w-4xl text-left">
            <h1 id="title" class="text-4xl md:text-6xl font-black mb-2 text-white drop-shadow-lg leading-tight uppercase italic">--</h1>
            <p id="sub" class="text-yellow-500 text-lg font-bold mb-4 italic">--</p>
            
            <div id="info-badges" class="flex flex-wrap gap-2 mb-4"></div>
            <div id="genres" class="flex flex-wrap gap-2 mb-6"></div>
            <p id="desc" class="text-gray-300 text-sm md:text-base mb-8 line-clamp-3 max-w-2xl leading-relaxed">--</p>
            
            <div class="flex items-center gap-4">
                <button onclick="playCurrent()" class="bg-yellow-500 text-black px-10 py-3 rounded-full font-black hover:scale-110 transition shadow-lg flex items-center gap-2">
                    <i class="fas fa-play"></i> XEM NGAY
                </button>
                <button class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center hover:bg-white/20 transition">
                    <i class="far fa-heart text-white"></i>
                </button>
                <button class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center hover:bg-white/20 transition">
                    <i class="fas fa-exclamation-circle text-white"></i>
                </button>
            </div>
        </div>
    </section>

    <section class="px-6 py-10">
        <h2 class="text-lg font-bold text-white mb-6 uppercase tracking-tight">Bạn đang quan tâm gì?</h2>
        <div class="flex overflow-x-auto gap-4 pb-4" style="scrollbar-width: none;">
            <div class="topic-card bg-blue-600"><span class="font-black italic text-lg">Marvel</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-teal-600"><span class="font-black italic text-lg">Sitcom</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-purple-600"><span class="font-black italic text-lg leading-tight">Lồng Tiếng<br>Cực Mạnh</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-orange-600"><span class="font-black italic text-lg">Xuyên Không</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-red-700"><span class="font-black italic text-lg">Cổ Trang</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-indigo-700"><span class="font-black italic text-lg">4k</span><span class="text-[10px] uppercase font-bold">Xem chủ đề <i class="fas fa-chevron-right"></i></span></div>
            <div class="topic-card bg-gray-800 border border-gray-700 flex items-center justify-center"><span class="font-black uppercase">+1 chủ đề</span></div>
        </div>
    </section>

    <main class="px-6 pb-20">
        <h2 class="text-xl font-extrabold italic uppercase mb-8 border-l-4 border-red-600 pl-4">Phim Mới Cập Nhật</h2>
        <div id="movie-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-6"></div>
    </main>

    <footer class="footer">
        <div class="max-w-7xl mx-auto">
            <div class="footer-tag">★ Hoàng Sa & Trường Sa là của Việt Nam!</div>
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-9 bg-[#d4a017] rounded-b-xl flex items-center justify-center"><i class="fas fa-play text-black"></i></div>
                <div class="flex flex-col leading-none border-r border-gray-700 pr-4">
                    <span class="text-2xl font-black text-white uppercase">XÔ PHIM</span>
                    <span class="text-[10px] text-gray-400 font-bold">YIXIU VIETNAM</span>
                </div>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-telegram-plane"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
            <p class="text-xs text-gray-500 leading-relaxed max-w-2xl">XôPhim - Trải nghiệm điện ảnh 4K tốt nhất 2026.</p>
            <p class="text-[10px] text-gray-600 mt-6 uppercase font-bold italic">© 2026 XôPhim - Đức Anh Đẹp Trai</p>
        </div>
        <div class="btn-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})"><i class="fas fa-arrow-up block mb-1"></i> ĐẦU<br>TRANG</div>
    </footer>

    <div id="player-overlay" class="fixed inset-0 z-[200] hidden bg-black flex flex-col">
        <div class="p-4 flex justify-between items-center bg-[#1a1a20]">
            <button onclick="closePlayer()" class="text-white text-xl hover:text-red-500 transition"><i class="fas fa-times"></i></button>
            <h2 id="player-title" class="font-bold text-xs text-gray-400 uppercase tracking-widest">Đang phát</h2>
            <div class="w-6"></div>
        </div>
        <iframe id="main-iframe" class="flex-1 w-full" frameborder="0" allowfullscreen></iframe>
    </div>

    <script>
        // Cập nhật mảng movies với đầy đủ thông tin chi tiết
        const movies = [
            { 
                title: "Sói Già Phố Wall", 
                sub: "The Wolf of Wall Street", 
                img: "https://phimimg.com/upload/vod/20231018-1/2e6fd68d5e7002fcc9fa6b8453242a8a.jpg", 
                imdb: "8.2", year: "2013", season: "Bản Gốc", episode: "Full",
                genres: ["Hài Hước", "Tội Phạm", "Chính Kịch"],
                desc: "Dựa trên câu chuyện có thật về cuộc đời của Jordan Belfort, từ sự nghiệp thăng tiến thành một người môi giới chứng khoán giàu có tại New York đến sự sụp đổ bởi lối sống trụy lạc và gian lận tài chính.",
                episodes: [{ link: "https://player.phimapi.com/player/?url=https://s2.phim1280.tv/20231019/KZ3IDVB4/index.m3u8" }] 
            },
            { 
                title: "Avatar 2", 
                sub: "The Way of Water", 
                img: "https://phimimg.com/upload/vod/20230620/b349b068e4c73a21685f0967a5416040.jpg", 
                imdb: "7.6", year: "2022", season: "Phần 2", episode: "Full HD",
                genres: ["Hành Động", "Phiêu Lưu", "Viễn Tưởng"],
                desc: "Jake Sully và Ney'tiri đã lập gia đình và đang làm mọi cách để giữ cho gia đình họ luôn hạnh phúc bên nhau. Tuy nhiên, họ phải rời khỏi nhà và khám phá các vùng đất mới của Pandora.",
                episodes: [{ link: "https://player.phimapi.com/player/?url=https://s3.phim1280.tv/20230620/A8W0G2V4/index.m3u8" }] 
            },
            { 
                title: "John Wick 4", 
                sub: "Baba Yaga", 
                img: "https://phimimg.com/upload/vod/20230523/830509a259c63c781057476834f3b174.jpg", 
                imdb: "7.7", year: "2023", season: "Phần 4", episode: "4K",
                genres: ["Hành Động", "Gay Cấn", "Tội Phạm"],
                desc: "John Wick tìm ra con đường để đánh bại High Table. Nhưng trước khi có thể giành lại tự do, Wick phải đối đầu với một kẻ thù mới với các liên minh hùng mạnh.",
                episodes: [{ link: "https://player.phimapi.com/player/?url=https://s3.phim1280.tv/20230523/T2B1U7F4/index.m3u8" }] 
            }
        ];

        let cur = 0;

        function closeAlertWithEffect() {
            document.getElementById('alertBox').classList.add('closing');
            setTimeout(() => { document.getElementById('tet-alert').style.display = 'none'; }, 500);
        }

        function updateBanner() {
            const m = movies[cur];
            const bg = document.getElementById('banner-bg');
            if(!bg) return;
            bg.style.opacity = 0;
            setTimeout(() => {
                bg.style.backgroundImage = `url('${m.img}')`;
                document.getElementById('title').innerText = m.title;
                document.getElementById('sub').innerText = m.sub;
                document.getElementById('desc').innerText = m.desc;

                // Cập nhật badges
                document.getElementById('info-badges').innerHTML = `
                    <span class="bg-yellow-600 text-black px-2 py-0.5 rounded text-xs font-bold uppercase tracking-tighter">IMDb ${m.imdb}</span>
                    <span class="border border-gray-500 px-2 py-0.5 rounded text-xs text-white font-medium">${m.year}</span>
                    <span class="border border-gray-500 px-2 py-0.5 rounded text-xs text-white font-medium">${m.season}</span>
                    <span class="border border-gray-500 px-2 py-0.5 rounded text-xs text-white font-medium">${m.episode}</span>
                `;

                // Cập nhật thể loại
                document.getElementById('genres').innerHTML = m.genres.map(g => `
                    <span class="bg-white/10 px-3 py-1 rounded text-[11px] text-gray-200 uppercase font-semibold border border-white/5">${g}</span>
                `).join('');

                bg.style.opacity = 0.6;
            }, 500);
            cur = (cur + 1) % movies.length;
        }

        function init() {
            const grid = document.getElementById('movie-grid');
            grid.innerHTML = "";
            movies.forEach((m, i) => {
                grid.innerHTML += `
                    <div class="cursor-pointer group" onclick="playMovie(${i})">
                        <div class="relative aspect-[2/3] rounded-xl overflow-hidden shadow-2xl bg-gray-900">
                            <img src="${m.img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition flex items-center justify-center">
                                <i class="fas fa-play text-yellow-500 text-2xl"></i>
                            </div>
                        </div>
                        <h3 class="mt-3 font-bold text-xs truncate text-gray-300 group-hover:text-yellow-500 transition">${m.title}</h3>
                    </div>
                `;
            });
            updateBanner();
            setInterval(updateBanner, 5000); // Đổi 5s để kịp xem mô tả
        }

        function playMovie(i) {
            document.getElementById('player-title').innerText = movies[i].title;
            document.getElementById('main-iframe').src = movies[i].episodes[0].link;
            document.getElementById('player-overlay').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closePlayer() { 
            document.getElementById('player-overlay').classList.add('hidden'); 
            document.getElementById('main-iframe').src = ""; 
            document.body.style.overflow = 'auto';
        }

        function playCurrent() { playMovie((cur - 1 + movies.length) % movies.length); }

        // Hiệu ứng hoa đào
        setInterval(() => {
            const s = document.createElement('div'); s.className = 'sakura';
            s.style.left = Math.random() * 100 + 'vw';
            s.style.width = s.style.height = Math.random() * 5 + 3 + 'px';
            s.style.animationDuration = Math.random() * 3 + 5 + 's';
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 7000);
        }, 600);

        // --- CODE PHÁO HOA ---
        const canvas = document.getElementById('fw-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.velocity = { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 };
                this.alpha = 1; this.friction = 0.95;
            }
            draw() {
                ctx.globalAlpha = this.alpha; ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = this.color; ctx.fill();
            }
            update() {
                this.velocity.x *= this.friction; this.velocity.y *= this.friction;
                this.y += 0.1; this.x += this.velocity.x; this.y += this.velocity.y;
                this.alpha -= 0.01;
            }
        }

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height * 0.5);
            const color = `hsl(${Math.random() * 360}, 100%, 60%)`;
            for (let i = 0; i < 30; i++) { particles.push(new Particle(x, y, color)); }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                if (p.alpha <= 0) particles.splice(i, 1);
                else { p.update(); p.draw(); }
            });
            if (Math.random() < 0.03) createFirework();
            requestAnimationFrame(animate);
        }
        animate();

        init();
    </script>
</body>
</html>
